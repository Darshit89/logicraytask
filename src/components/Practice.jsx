import React, { useContext, useEffect, useState } from "react";
import { useOutletContext } from "react-router-dom";

import axios from "axios";

function Practice(props) {
  const [PracticeQuzzie, setPracticeQuzzie] = useState([]);
  const [loading, setloading] = useState(true);

  const data = useOutletContext();
  console.log("data: ", data);

  const fetchPractice = async () => {
    const response = await axios.get(
      "http://143.110.254.46:8089/api/practice/?format=json"
    );
    if (response.status == 200) {
      setloading(false);
    }
    setPracticeQuzzie(response.data.results);
  };
  useEffect(() => {
    fetchPractice();
  }, []);

  if (loading) {
    return (
      <>
        <h1>Loading....</h1>
      </>
    );
  }

  return (
    <div className="scroll">
      {data.length > 0
        ? data.map((filterval) => {
            return (
              <div
                key={filterval.id}
                className=" bg-white m-3 rounded row"
                style={{ height: "150px" }}
              >
                <div className="col-3md-3 col-2">
                  <div width="30px">
                    <svg
                      id="Capa_1"
                      enable-background="new 0 0 512 512"
                      height="70"
                      viewBox="0 0 512 512"
                      width="70"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g>
                        <g fill="#dfe7f4">
                          <path d="m15 406v60h241 241v-60h-241z" />
                          <path d="m256 46h-241v60h241 241v-60z" />
                        </g>
                        <path d="m256 46h241v60h-241z" fill="#c7cfe1" />
                        <path d="m256 406h241v60h-241z" fill="#c7cfe1" />
                        <path
                          d="m256 106h-226v300h226 226v-300z"
                          fill="#ff641a"
                        />
                        <path d="m256 106h226v300h-226z" fill="#f03800" />
                        <g>
                          <g fill="#404a80">
                            <path d="m0 391v90h256 256v-90h-256zm81 60h-51v-30h51zm80 0h-50v-30h50zm80 0h-50v-30h50zm190-30h51v30h-51zm-80 0h50v30h-50zm-80 0h50v30h-50z" />
                            <path d="m256 31h-256v90h256 256v-90zm-175 60h-51v-30h51zm80 0h-50v-30h50zm80 0h-50v-30h50zm80 0h-50v-30h50zm80.001 0h-50.001v-30h50.001zm80.999 0h-51.099v-30h51.099z" />
                          </g>
                          <g fill="#283366">
                            <path d="m321 91h-50v-30h50zm80.001 0h-50.001v-30h50.001zm-145.001-60v90h256v-90zm226 60h-51.099v-30h51.099z" />
                            <path d="m512 391h-256v90h256zm-191 60h-50v-30h50zm80 0h-50v-30h50zm81 0h-51v-30h51z" />
                          </g>
                        </g>
                        <path
                          d="m256 197.976-45-29.998v176.044l45-29.998 87.041-58.024z"
                          fill="#f0f7ff"
                        />
                        <path
                          d="m256 197.976v116.048l87.041-58.024z"
                          fill="#dfe7f4"
                        />
                      </g>
                    </svg>
                  </div>
                </div>
                <div className="col-md-8 col-sm-10 col-10">
                  <div>
                    <h6>{filterval.chapter_name_english || ""}</h6>
                    <h6>{filterval.language || ""}</h6>
                    <h6>{filterval.subject || ""}</h6>
                    <h6>{filterval.youtube_link || ""}</h6>
                  </div>
                </div>
                <div className="col-md-1 col-sm-12 col-12 btnclr d-flex align-items-center">
                  <div>
                    <svg
                      height="40"
                      viewBox="-33 0 512 512.00102"
                      fill="#ffff"
                      width="40"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="m361.824219 344.394531c-24.53125 0-46.632813 10.59375-61.972657 27.445313l-137.972656-85.453125c3.683594-9.429688 5.726563-19.671875 5.726563-30.386719 0-10.71875-2.042969-20.960938-5.726563-30.386719l137.972656-85.457031c15.339844 16.851562 37.441407 27.449219 61.972657 27.449219 46.210937 0 83.804687-37.59375 83.804687-83.804688 0-46.210937-37.59375-83.800781-83.804687-83.800781-46.210938 0-83.804688 37.59375-83.804688 83.804688 0 10.714843 2.046875 20.957031 5.726563 30.386718l-137.96875 85.453125c-15.339844-16.851562-37.441406-27.449219-61.972656-27.449219-46.210938 0-83.804688 37.597657-83.804688 83.804688 0 46.210938 37.59375 83.804688 83.804688 83.804688 24.53125 0 46.632812-10.59375 61.972656-27.449219l137.96875 85.453125c-3.679688 9.429687-5.726563 19.671875-5.726563 30.390625 0 46.207031 37.59375 83.800781 83.804688 83.800781 46.210937 0 83.804687-37.59375 83.804687-83.800781 0-46.210938-37.59375-83.804688-83.804687-83.804688zm-53.246094-260.589843c0-29.359376 23.886719-53.246094 53.246094-53.246094s53.246093 23.886718 53.246093 53.246094c0 29.359374-23.886718 53.246093-53.246093 53.246093s-53.246094-23.886719-53.246094-53.246093zm-224.773437 225.441406c-29.363282 0-53.25-23.886719-53.25-53.246094s23.886718-53.246094 53.25-53.246094c29.359374 0 53.242187 23.886719 53.242187 53.246094s-23.882813 53.246094-53.242187 53.246094zm224.773437 118.949218c0-29.359374 23.886719-53.246093 53.246094-53.246093s53.246093 23.886719 53.246093 53.246093c0 29.359376-23.886718 53.246094-53.246093 53.246094s-53.246094-23.886718-53.246094-53.246094zm0 0" />
                    </svg>
                  </div>
                </div>
              </div>
            );
          })
        : PracticeQuzzie.map((practice) => {
            return (
              <div
                key={practice.question_setId}
                className=" bg-white m-3 rounded row"
                style={{ height: "150px" }}
              >
                <div className="col-md-2 col-2">
                  <div width="30px">
                    <svg
                      id="Capa_1"
                      enable-background="new 0 0 512 512"
                      height="70"
                      viewBox="0 0 512 512"
                      width="70"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g>
                        <g fill="#dfe7f4">
                          <path d="m15 406v60h241 241v-60h-241z" />
                          <path d="m256 46h-241v60h241 241v-60z" />
                        </g>
                        <path d="m256 46h241v60h-241z" fill="#c7cfe1" />
                        <path d="m256 406h241v60h-241z" fill="#c7cfe1" />
                        <path
                          d="m256 106h-226v300h226 226v-300z"
                          fill="#ff641a"
                        />
                        <path d="m256 106h226v300h-226z" fill="#f03800" />
                        <g>
                          <g fill="#404a80">
                            <path d="m0 391v90h256 256v-90h-256zm81 60h-51v-30h51zm80 0h-50v-30h50zm80 0h-50v-30h50zm190-30h51v30h-51zm-80 0h50v30h-50zm-80 0h50v30h-50z" />
                            <path d="m256 31h-256v90h256 256v-90zm-175 60h-51v-30h51zm80 0h-50v-30h50zm80 0h-50v-30h50zm80 0h-50v-30h50zm80.001 0h-50.001v-30h50.001zm80.999 0h-51.099v-30h51.099z" />
                          </g>
                          <g fill="#283366">
                            <path d="m321 91h-50v-30h50zm80.001 0h-50.001v-30h50.001zm-145.001-60v90h256v-90zm226 60h-51.099v-30h51.099z" />
                            <path d="m512 391h-256v90h256zm-191 60h-50v-30h50zm80 0h-50v-30h50zm81 0h-51v-30h51z" />
                          </g>
                        </g>
                        <path
                          d="m256 197.976-45-29.998v176.044l45-29.998 87.041-58.024z"
                          fill="#f0f7ff"
                        />
                        <path
                          d="m256 197.976v116.048l87.041-58.024z"
                          fill="#dfe7f4"
                        />
                      </g>
                    </svg>
                  </div>
                </div>
                <div className="col-md-8 col-sm-10 col-10">
                  <div>
                    <h6>{practice.chapter_name_original || ""}</h6>
                    <p>{practice.grade || ""}</p>
                    <p>{practice.video_topic_name || ""}</p>
                  </div>
                </div>
                <div className="col-md-1 col-sm-12 col-12 btnclr d-flex align-items-center">
                  <div>
                    <svg
                      height="40"
                      viewBox="-33 0 512 512.00102"
                      fill="#ffff"
                      width="40"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="m361.824219 344.394531c-24.53125 0-46.632813 10.59375-61.972657 27.445313l-137.972656-85.453125c3.683594-9.429688 5.726563-19.671875 5.726563-30.386719 0-10.71875-2.042969-20.960938-5.726563-30.386719l137.972656-85.457031c15.339844 16.851562 37.441407 27.449219 61.972657 27.449219 46.210937 0 83.804687-37.59375 83.804687-83.804688 0-46.210937-37.59375-83.800781-83.804687-83.800781-46.210938 0-83.804688 37.59375-83.804688 83.804688 0 10.714843 2.046875 20.957031 5.726563 30.386718l-137.96875 85.453125c-15.339844-16.851562-37.441406-27.449219-61.972656-27.449219-46.210938 0-83.804688 37.597657-83.804688 83.804688 0 46.210938 37.59375 83.804688 83.804688 83.804688 24.53125 0 46.632812-10.59375 61.972656-27.449219l137.96875 85.453125c-3.679688 9.429687-5.726563 19.671875-5.726563 30.390625 0 46.207031 37.59375 83.800781 83.804688 83.800781 46.210937 0 83.804687-37.59375 83.804687-83.800781 0-46.210938-37.59375-83.804688-83.804687-83.804688zm-53.246094-260.589843c0-29.359376 23.886719-53.246094 53.246094-53.246094s53.246093 23.886718 53.246093 53.246094c0 29.359374-23.886718 53.246093-53.246093 53.246093s-53.246094-23.886719-53.246094-53.246093zm-224.773437 225.441406c-29.363282 0-53.25-23.886719-53.25-53.246094s23.886718-53.246094 53.25-53.246094c29.359374 0 53.242187 23.886719 53.242187 53.246094s-23.882813 53.246094-53.242187 53.246094zm224.773437 118.949218c0-29.359374 23.886719-53.246093 53.246094-53.246093s53.246093 23.886719 53.246093 53.246093c0 29.359376-23.886718 53.246094-53.246093 53.246094s-53.246094-23.886718-53.246094-53.246094zm0 0" />
                    </svg>
                  </div>
                </div>
              </div>
            );
          })}
    </div>
  );
}

export default Practice;
